# ================================
# ENVIRONMENT CONFIGURATION
# ================================
# This is a template file - copy to .env and fill in your values
# For production: Use strong, randomly generated secrets
# For development: Adjust URLs to localhost

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_HOST=db
POSTGRES_DB=db
POSTGRES_USER=user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_PORT=5432

# Database URL (async driver for application)
DATABASE_URL=

# ============================================
# Security & Encryption
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET_KEY=CHANGE_THIS_JWT_SECRET_KEY
EMAIL_ENCRYPTION_KEY=CHANGE_THIS_EMAIL_ENCRYPTION_KEY
INTERNAL_API_KEY=CHANGE_THIS_INTERNAL_API_KEY
JWT_EXPIRATION_TIME=3600

# NextAuth Secret (CRITICAL - REQUIRED)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=CHANGE_THIS_NEXTAUTH_SECRET

# ============================================
# Redis Configuration
# ============================================
# Development: Use local Redis
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_USERNAME=
# REDIS_PASSWORD=

# Production: Use managed Redis (Redis Cloud example)
REDIS_HOST=your-redis-host.redis-cloud.com
REDIS_DB=0
REDIS_PORT=19980
REDIS_USERNAME=default
REDIS_PASSWORD=YOUR_REDIS_PASSWORD

# ============================================
# MinIO Object Storage
# ============================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=YOUR_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=YOUR_MINIO_SECRET_KEY
MINIO_BUCKET=content-resources
MINIO_SECURE=false

# ============================================
# API Keys
# ============================================
# Google Gemini API (Required for AI features)
GOOGLE_GENAI_API_KEY=YOUR_GOOGLE_GEMINI_API_KEY

# Together AI (Optional)
TOGETHER_API_KEY=YOUR_TOGETHER_API_KEY

# ============================================
# Twitter API (Optional)
# ============================================
TWITTER_API_KEY=YOUR_TWITTER_API_KEY
TWITTER_API_SECRET=YOUR_TWITTER_API_SECRET
TWITTER_ACCESS_TOKEN=YOUR_TWITTER_ACCESS_TOKEN
TWITTER_ACCESS_TOKEN_SECRET=YOUR_TWITTER_ACCESS_TOKEN_SECRET
TWITTER_BEARER_TOKEN=YOUR_TWITTER_BEARER_TOKEN

# ============================================
# Frontend URLs
# ============================================
# Development Example (localhost):
# NEXTAUTH_URL=http://localhost:4000
# NEXT_PUBLIC_API_URL=http://localhost:8000
# NEXT_PUBLIC_BACKEND_BASE=http://localhost:8000
# NEXT_PUBLIC_BACKEND_WS_BASE=ws://localhost:8000
# INTERNAL_API_URL=http://localhost:8000

# Production Example (your domain):
NEXTAUTH_URL=https://yourdomain.com
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_BACKEND_BASE=https://api.yourdomain.com
NEXT_PUBLIC_BACKEND_WS_BASE=wss://api.yourdomain.com
INTERNAL_API_URL=http://backend:8000

# ============================================
# Google OAuth Configuration
# ============================================
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET

# IMPORTANT: Add these to Google OAuth Authorized Redirect URIs:
# https://yourdomain.com/api/auth/callback/google
# https://api.yourdomain.com/api/auth/callback/google

# ============================================
# WalletConnect (Optional)
# ============================================
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=YOUR_WALLETCONNECT_PROJECT_ID

# ============================================
# Admin Credentials
# ============================================
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# ============================================
# Counselor Credentials
# ============================================
COUNSELOR_EMAIL=counselor@yourdomain.com
COUNSELOR_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
COUNSELOR_NAME=Main Counselor

# ============================================
# Web3 / Blockchain
# ============================================

# EDUChain Testnet (Journal NFT Badges)
NFT_CONTRACT_ADDRESS=0x8c251c055BC712246392C8229e5ad95859c48AFe
EDU_TESTNET_RPC_URL=https://rpc.open-campus-codex.gelato.digital
EDU_CHAIN_TESTNET_CHAIN_ID=656476

# SOMNIA Blockchain ($CARE Token)
# Testnet: https://dream-rpc.somnia.network/ (Chain ID: 50312)
# Mainnet: https://api.infra.mainnet.somnia.network/ (Chain ID: 5031)
SOMNIA_RPC_URL=https://dream-rpc.somnia.network/
CARE_TOKEN_ADDRESS=YOUR_DEPLOYED_CARE_TOKEN_ADDRESS
CARE_TOKEN_NETWORK=testnet

# Minter Wallet (Private key WITHOUT 0x prefix)
# EDUChain: Used for minting Journal NFT badges
# SOMNIA: Used for minting $CARE token rewards (needs MINTER_ROLE)
BACKEND_MINTER_PRIVATE_KEY=YOUR_PRIVATE_KEY_WITHOUT_0x_PREFIX
CARE_MINTER_PRIVATE_KEY=YOUR_CARE_MINTER_PRIVATE_KEY_WITHOUT_0x_PREFIX

# ============================================
# Backend Configuration
# ============================================
APP_ENV=production
BACKEND_PORT=8000
FRONTEND_PORT=4000

# Backend URLs
# Development: http://localhost:8000
# Production: https://api.yourdomain.com
FRONTEND_URL=https://yourdomain.com
BACKEND_URL=https://api.yourdomain.com

# CORS Origins (comma-separated)
ALLOWED_ORIGINS=https://yourdomain.com,http://localhost:4000,http://127.0.0.1:4000
LOG_LEVEL=INFO
WORKERS_PER_CORE=4

# ============================================
# Rate Limiting Configuration
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_BYPASS_ADMIN=true

# Rate limits for students
RATE_LIMIT_CHAT_PER_MINUTE_STUDENT=10
RATE_LIMIT_CHAT_PER_HOUR_STUDENT=100
RATE_LIMIT_CHAT_PER_DAY_STUDENT=500

# Rate limits for counsellors
RATE_LIMIT_CHAT_PER_MINUTE_COUNSELLOR=30
RATE_LIMIT_CHAT_PER_HOUR_COUNSELLOR=300
RATE_LIMIT_CHAT_PER_DAY_COUNSELLOR=2000

# Rate limits for analytics endpoints
RATE_LIMIT_ANALYTICS_PER_MINUTE_STUDENT=5
RATE_LIMIT_ANALYTICS_PER_HOUR_STUDENT=30
RATE_LIMIT_ANALYTICS_PER_DAY_STUDENT=100

# ============================================
# Caching Configuration
# ============================================
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600           # 1 hour
CACHE_USER_SUMMARY_TTL=1800      # 30 minutes
CACHE_JOURNAL_TTL=900            # 15 minutes
CACHE_RESOURCE_TTL=86400         # 24 hours
CACHE_CBT_MODULE_TTL=86400       # 24 hours
CACHE_USER_PROFILE_TTL=3600      # 1 hour

# ============================================
# Development Flags
# ============================================
# Set to 'true' to enable hardcoded admin@ugm.ac.id login (DEV ONLY!)
ALLOW_DEV_CREDENTIALS=false

# ============================================
# System
# ============================================
TZ=Asia/Jakarta

# ============================================
# GitHub Container Registry (for CI/CD)
# ============================================
GHCR_REPOSITORY_OWNER=gigahidjrikaaa
GIT_SHA=latest




